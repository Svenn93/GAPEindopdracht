!function(a,b){b["true"]=a;var c=function(){function a(){q=[],r=[],t=[],y=[],z=[],z[0]=[],z[1]=[],z[2]=[],B=0,A=[],stage=new createjs.Stage("cnvs"),x=new i(1200,800),u=stage.canvas.width,v=stage.canvas.height,x.boundH=-(x.height-v),x.boundW=-(x.width-u),k(),n(),s=new h(50,x.height-200,20,20),s.gravity=x.gravity,s.friction=x.friction,x.addChild(s.shape),w=createjs.Ticker,w.setFPS("60"),w.addEventListener("tick",b),window.onkeydown=c,window.onkeyup=j,stage.addChild(x.container)}function b(){t[37]&&s.velX>-s.speed&&s.velX--,t[38]&&s.grounded&&!s.jumping&&(s.grounded=!1,s.jumping=!0,s.velY=2*-s.speed),t[39]&&s.velX<s.speed&&s.velX++,s.grounded=!1;for(var a=0;a<q.length;a++)switch(e.checkCollision(s,q[a])){case"l":s.velX=0;break;case"r":s.velX=0;break;case"t":s.velY*=-1;break;case"b":s.grounded=!0,s.jumping=!1}for(var b=0;b<y.length;b++)switch(e.checkCollision(s,y[b])){case"l":s.velX=0,s.x=50,s.y=x.height-200;break;case"r":s.velX=0,s.x=50,s.y=x.height-200;break;case"t":s.velY*=-1,s.x=50,s.y=x.height-200;break;case"b":s.grounded=!0,s.jumping=!1,s.x=50,s.y=x.height-200}s.update(),stage.update()}function c(a){if(t[a.keyCode]=!0,90===a.keyCode){for(var b=0;b<z[1].length;b++)z[1][b].setVisibility(!0);for(var c=0;b<z[0].length;c++)z[0][c].alpha=0;B++}if(65===a.keyCode){for(var d=0;d<z[1].length;d++)z[1][d].setVisibility(!1);for(var e=0;e<z[0].length;e++)z[0][e].alpha=1;B++}}function j(a){t[a.keyCode]=!1}function k(){q.push(new d(0,x.height-1,x.width,1)),q.push(new d(0,0,x.width,1)),q.push(new d(0,0,1,x.height)),q.push(new d(x.width-1,0,1,x.height))}function l(){for(var a=D.tilesets[0].tilewidth,b=D.tilesets[0].tileheight,c={images:[C],frames:{width:a,height:b}},d=new createjs.SpriteSheet(c),e=0;e<D.layers.length;e++){var f=D.layers[e];"tilelayer"===f.type&&m(f,d,D.tilewidth,D.tileheight)}}function m(a,b,c){for(var d=0;d<a.height;d++)for(var e=0;e<a.width;e++){var f=new createjs.Sprite(b),h=e+d*a.width;if(f.gotoAndStop(a.data[h]-1),f.x=e*c,f.y=d*c,console.log(f),x.addChild(f),z[0].push(f),0!==a.data[h])switch(a.name){case"World":var i=new g(f.x,f.y,50,50);q.push(i);break;case"Death":var j=new g(f.x,f.y,50,50);y.push(j)}}}function n(){$.getJSON("maps/level1/level1.json",o),C=new Image,C.src=D.tilesets[0].image,C.onLoad=l();var a=new f(850,x.height-150,100,15,"#E3D3C6",300,850,"l",5e3);stage.addChild(a.shape),q.push(a),z[1].push(a);for(var b=0;b<y.length;b++)y[b].setVisibility(!1);p()}function o(a){console.log("gelukt",a)}function p(){console.log("init cameras"),A[0]=!0,A[1]=!1,console.log(z);for(var a=0;a<z[1].length;a++)z[1][a].setVisibility(!1)}var q,r,s,t,u,v,w,x,y,z,A,B,C,D;return a}(),d=function(){function a(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d}return a}(),e=function(){function a(){}return a.checkCollision=function(a,b){var c=a.x+a.width/2-(b.x+b.width/2),d=a.y+a.height/2-(b.y+b.height/2),e=a.width/2+b.width/2,f=a.height/2+b.height/2,g="";if(Math.abs(c)<e&&Math.abs(d)<f){var h=e-Math.abs(c),i=f-Math.abs(d);return h>=i?d>0?(g="t",a.y+=i):(g="b",a.y-=i):c>0?(g="l",a.x+=h):(g="r",a.x-=h),g}},a}(),f=function(){function a(a,b,c,d,e,f,g,h,i){this.x=a,this.y=b,this.color=e,this.width=c,this.height=d,this.speed=i,this.orientation=h,this.leftBound=f,this.rightBound=g,this.shape=new createjs.Shape,this.shape.x=this.x,this.shape.y=this.y;var j=this;j.draw()}return a.prototype.draw=function(){this.shape.graphics.c(),this.shape.graphics.f(this.color),this.shape.graphics.dr(0,0,this.width,this.height),this.shape.graphics.ef(),this.move()},a.prototype.move=function(){"l"===this.orientation?(createjs.Tween.get(this).to({x:this.leftBound},this.speed).call(this.changeOrientation),createjs.Tween.get(this.shape).to({x:this.leftBound},this.speed),console.log(this.x)):(createjs.Tween.get(this).to({x:this.rightBound},this.speed).call(this.changeOrientation),createjs.Tween.get(this.shape).to({x:this.rightBound},this.speed))},a.prototype.changeOrientation=function(){this.orientation="l"===this.orientation?"r":"l",this.move()},a.prototype.setVisibility=function(a){this.shape.visible=a},a}(),g=(function(){function a(a,b,c,d,e,f,g,h,i){this.x=a,this.y=b,this.color=e,this.width=c,this.height=d,this.speed=i,this.orientation=h,this.downBound=f,this.upBound=g,this.shape=new createjs.Shape,this.shape.x=this.x,this.shape.y=this.y;var j=this;j.draw()}return a.prototype.draw=function(){this.shape.graphics.c(),this.shape.graphics.f(this.color),this.shape.graphics.dr(0,0,this.width,this.height),this.shape.graphics.ef(),this.move()},a.prototype.move=function(){"u"===this.orientation?(createjs.Tween.get(this).to({y:this.upBound},this.speed).call(this.changeOrientation),createjs.Tween.get(this.shape).to({y:this.upBound},this.speed),console.log(this.y)):(createjs.Tween.get(this).to({y:this.downBound},this.speed).call(this.changeOrientation),createjs.Tween.get(this.shape).to({y:this.downBound},this.speed))},a.prototype.changeOrientation=function(){this.orientation="u"===this.orientation?"d":"u",this.move()},a.prototype.setVisibility=function(a){this.shape.visible=a},a}(),function(){function a(a,b,c,d,e){this.x=a,this.y=b,this.color=e,this.width=c,this.height=d,this.shape=new createjs.Shape,this.shape.x=this.x,this.shape.y=this.y,this.draw()}return a.prototype.draw=function(){this.shape.graphics.c(),this.shape.graphics.dr(0,0,this.width,this.height),this.shape.graphics.ef()},a.prototype.setVisibility=function(a){this.shape.visible=a},a}()),h=function(){function a(a,b,c,d){this.x=a,this.y=b,this.velX=0,this.velY=0,this.speed=3,this.friction=.8,this.gravity=.3,this.grounded=!1,this.jumping=!1,this.width=c,this.height=d,this.shape=new createjs.Shape,this.shape.x=this.x,this.shape.y=this.y;var e=this;e.draw()}return a.prototype.draw=function(){this.shape.graphics.f("#79CDCD	"),this.shape.graphics.dr(0,0,this.width,this.height),this.shape.graphics.ef()},a.prototype.update=function(){this.grounded&&(this.velY=0),this.y+=this.velY,this.x+=this.velX,this.shape.x=this.x,this.shape.y=this.y,this.velX*=this.friction,this.velY+=this.gravity},a}(),i=(function(){function a(a,b,c,d){this.x=a,this.y=b,this.color=d,this.radius=c,this.shape=new createjs.Shape,this.shape.x=this.x,this.shape.y=this.y,this.draw()}return a.prototype.draw=function(){this.shape.graphics.c(),this.shape.graphics.f(this.color),this.shape.graphics.dc(this.x+this.radius/2,this.y+this.radius/2,this.radius),this.shape.graphics.ef()},a.prototype.setVisibility=function(a){this.shape.visible=a},a}(),function(){function a(a,b){this.friction=.8,this.gravity=.3,this.width=a,this.height=b,this.container=new createjs.Container}return a.prototype.addChild=function(a){this.container.addChild(a)},a}());!function(){function a(){d(),setInterval(function(){b()},1e3)}function b(){9>g?($("#guy").attr("src","images/guyNormal.png"),g+=1):9===g&&($("#guy").attr("src","images/guyDrink.png"),g=0)}function d(){$("#previous").click(function(){switch($(this).next().html()){case f[0]:$(this).next().html(f[2]);break;case f[1]:$(this).next().html(f[0]);break;case f[2]:$(this).next().html(f[1])}}),$("#next").click(function(){switch($(this).prev().html()){case f[0]:$(this).prev().html(f[1]);break;case f[1]:$(this).prev().html(f[2]);break;case f[2]:$(this).prev().html(f[0])}}),$("li").click(function(){switch($(this).html()){case f[0]:console.log("play game"),$("#menu").remove(),$("canvas").css("display","block"),e();break;case f[1]:console.log("select level");break;case f[2]:console.log("leaderbord")}})}function e(){new c}var f=["PLAY","LEVELS","SCORES"],g=0;a()}()}({},function(){return this}());